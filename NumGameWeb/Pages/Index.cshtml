@page
@model indexModel
@{
}



<div class="container mt-3">
    <div asp-validation-summary="All" class="text-danger"></div>
    <!-- First Container -->
    <div class="row">
        <div class="col-md-12 text-center">
            <div id="countdown">
                <h1 class="text-danger">OPENING TIME</h1>
                <div id='timer'></div>
                <div class="labels">
                    <span>Mins</span>
                    <span>Secs</span>
                </div>
            </div>
            <hr />

        </div>
        <div class="col-md-12 text-center">
            <div class="result-circle">LIVE RESULT<br /> <strong id="OpenNumber">@(Model.OpenNumber < 10 ? $"0{Model.OpenNumber}" : Model.OpenNumber)</strong> </div>
            <hr />
        </div>
        <div class="col-md-12 text-md-start">
            <div class="d-flex justify-content-between">
            <h2><i class="fas fa-wallet ml-3"></i> <span id="Wallet">@(Model.UserData?.wallet) ₹</span></h2>
                <a href="/UserHistory" class="btn btn-primary">Payment History</a>
            </div>
        </div>
            @{await Html.RenderPartialAsync("_LoginPartial");}

            <hr />

        @*//Last 10 opening numbers*@
        <div class="col-md-12 text-center">
            <h4>PREVIOUS OPENING NUMBERS</h4>
            <div id="previousOpenings" class="d-flex flex-wrap justify-content-center" style="color:#ffff">
                @if (Model.PreviosOpnings != null && Model.PreviosOpnings.Count > 0)
                {
                    foreach (var item in Model.PreviosOpnings)
                    {
                        <div class="border border-success bg-success rounded m-1 p-1">@(item<10?$"0{item}":item)</div>
                    }

                }
                else
                {
                    <div class="border border-primary rounded m-3">01</div>
                    <div class="border border-primary rounded m-3">02</div>
                    <div class="border border-primary rounded m-3">04</div>
                    <div class="border border-primary rounded m-3">55</div>
                    <div class="border border-primary rounded m-3">76</div>
                    <div class="border border-primary rounded m-3">36</div>
                    <div class="border border-primary rounded m-3">98</div>
                    <div class="border border-primary rounded m-3">16</div>
                    <div class="border border-primary rounded m-3">48</div>
                    <div class="border border-primary rounded m-3">49</div>
                }

            </div>
            <hr />

        </div>
        @*//Betting Numbers*@
        <div class="col-md-12 mt-3">
            <div class="text-center text-danger"><h5>WINNING AMOUNT (1₹ X 90₹ = 90₹)</h5></div>
            <div class="d-flex justify-content-between" style="margin-left:20px">
                <!-- The numbers 00 to 99 will be generated by JavaScript -->
                <div id="numbercontainer" class="d-flex flex-wrap">
                    @for (int i = 0; i < 100; i++)
                    {
                        <button data-value="@(i < 10 ? $"0{i}" : i)" type="button" class="btn btn-outline-dark m-2 badge-container">@(i < 10 ? $"0{i}" : i)</button>
                    }

                </div>

            </div>
        </div>


        <div class="col-md-12 mt-2 mb-5 justify-content-end">
            <div class="btn-group">
                <div id="pricebutons" class="col-5">
                    <div class="btn-group btn-group-justified mb-2">
                        <input type="radio" name="priceBtn" value="1" class="btn-check" id="btnone" autocomplete="off" checked="">
                        <label class="btn btn-outline-primary" for="btnone">1₹</label>
                        <input type="radio" name="priceBtn" value="5" class="btn-check" id="btntwo" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btntwo">5₹</label>
                        <input type="radio" name="priceBtn" value="10" class="btn-check" id="btnthree" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnthree">10₹</label>
                        <input type="radio" name="priceBtn" value="50" class="btn-check" id="btnfour" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnfour">50₹</label>

                    </div>
                    <div class="btn-group btn-group-justified mb-2">
                        <input type="radio" name="priceBtn" value="100" class="btn-check" id="btnfive" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnfive">100₹</label>
                        <input type="radio" name="priceBtn" value="500" class="btn-check" id="btnsix" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnsix">500₹</label>
                        <input type="radio" name="priceBtn" value="1000" class="btn-check" id="btnseven" autocomplete="off">
                        <label class="btn btn-outline-primary" for="btnseven">1000₹</label>


                    </div>
                </div>
                <div class="col-md-4" style="margin-left: 36px;">
                    <div class="mb-3">
                        <h4>Your Total Bet <span class="badge bg-success badge-light" id="TotalBet">0</span></h4>
                    </div>
                    <button type="button" id="Confirmclick" class="btn btn-success btn-sm mt-2" onclick="ConfirmBet(event)">Confirm Bet!</button>
                    <button type="button" id="Cancelclick" class="btn btn-danger btn-sm mt-2"  onclick="clearBettingButtonBadge()">Cancel Bet!</button>
                   
                
                </div>
            </div>
        </div>
    </div>

    
   

   
    


</div>
<!-- Announce Winner and user Number Modal -->

<div class="modal fade" id="WinnerModal" role="dialog">
    <div class="modal-dialog">
        <div class="card">
            <div class="text-right cross"> <i class="fa fa-times"></i> </div>
            <div class="card-body text-center">
                <img src="https://img.icons8.com/bubbles/200/000000/trophy.png">
                <h3>CONGRATULATIONS!</h3>
                <label> Winning Number</label>
                <h5 id="WinningNumber"></h5><br />
                <label>Winning Price</label>
                <h6 id="WinningPrice"></h6>
            </div>
        </div>
    </div>
</div>

<!-- Alert Modal -->
<div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center">
                    <i id="notificationIcon" class=""></i>
                    <p id="notificationMessage"></p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal HTML -->
<div class="modal fade" id="installModal" tabindex="-1" aria-labelledby="installModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="installModalLabel">Install Our App</h5>
            </div>
            <div class="modal-body">
                <p>Would you like to install our app and access it easily from your home screen?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="installButton">Install</button>
                <button type="button" class="btn btn-primary" style="display:none" id="OpenApp">Open App</button>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.10/signalr.min.js"></script>
    <script src="index.js" asp-append-version="true"></script>
    <script src="AppMain.js" asp-append-version="true"></script>
    <script>
        localStorage.setItem('walletBalance', @Model.UserData!.wallet);
    </script>
   

    }


